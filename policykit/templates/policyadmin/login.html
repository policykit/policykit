{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/login.css" %}">
{{ form.media }}
{% endblock %}

{% block extrahead %}
<script src={% static "policyengine/js/jquery-3.4.1.min.js" %}></script>
<script src={% static "policyengine/js/login.js" %}></script>
{% endblock %}

{% block bodyclass %}{{ block.super }} login {% endblock %}

{% block usertools %}

{% endblock %}

{% block nav-global %}{% endblock %}

{% block content_title %}{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content %}

{% if request.GET.error %}
  Error: {{ request.GET.error }}
{% endif %}

{% if request.GET.success %}
  Successfully added PolicyKit!
{% endif %}

<P>
<b>Connect PolicyKit to Slack</b>

<BR>
You must be an admin of the Slack to add PolicyKit to your workspace.<BR>

<a href="https://slack.com/oauth/v2/authorize?state=app&redirect_uri={{server_url}}%2Fslack%2Foauth&client_id={{slack_client_id}}&scope=channels:read,groups:read,pins:read,app_mentions:read,calls:read,calls:write,channels:history,channels:join,channels:manage,chat:write,commands,dnd:read,emoji:read,files:read,files:write,groups:history,groups:write,im:history,im:read,im:write,incoming-webhook,links:read,links:write,mpim:history,mpim:read,mpim:write,pins:write,reactions:read,reactions:write,reminders:read,reminders:write,remote_files:read,remote_files:share,remote_files:write,team:read,usergroups:read,usergroups:write,users.profile:read,users:read,users:read.email,users:write&user_scope=chat:write,channels:write,groups:write,im:write,mpim:write"><img alt="Add to Slack" height="40" width="139" src="https://platform.slack-edge.com/img/add_to_slack.png" srcset="https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"></a>
</P>

<P>


	<a href="https://slack.com/oauth/v2/authorize?state=user&user_scope=identity.basic,identity.avatar&redirect_uri={{server_url}}%2Fslack%2Foauth&client_id={{slack_client_id}}">
	<img src="https://platform.slack-edge.com/img/sign_in_with_slack.png" srcset="https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x" />
	</a>


</P>

<BR>
<BR>

<P>
<b>Connect PolicyKit to Reddit</b>
<BR>
<BR>

Because Reddit doesn't grant permissions on a subreddit by subreddit basis, you should create a Reddit account and make that account a moderator
with full permissions on your Reddit. Then, while logged in to that account, click below to grant PolicyKit permission to act on behalf of that account.


<BR>


<a href="https://www.reddit.com/api/v1/authorize?client_id={{reddit_client_id}}&response_type=code&state=policykit_reddit_mod_install&redirect_uri={{server_url}}%2Freddit%2Foauth&duration=permanent&scope=modcontributors,modmail,mysubreddits,modconfig,modflair,modothers,modtraffic,modself,modlog,modposts,modwiki,read,privatemessages,submit">
	Install PolicyKit to Reddit
</a>

</P>

<P>

You must be a subscriber to the Subreddit first.
<BR>
<a href="https://www.reddit.com/api/v1/authorize?client_id={{reddit_client_id}}&response_type=code&state=policykit_reddit_user_login&redirect_uri={{server_url}}%2Freddit%2Foauth&duration=permanent&scope=edit,flair,identity,mysubreddits,read,submit,save,vote">
	Sign in with Reddit
</a>

</P>

<BR>
<BR>

<P>
<b>Connect PolicyKit to Discord</b>

<BR>
You must be an admin of the Discord to add PolicyKit to your server.<BR>

<a href="https://discordapp.com/api/oauth2/authorize?client_id={{discord_client_id}}&response_type=code&redirect_uri={{server_url}}%2Fdiscord%2Foauth&scope=bot%20identify%20guilds&permissions=8&state=policykit_discord_mod_install">
  Install PolicyKit to Discord
</a>
</P>

<P>

<a href="https://discordapp.com/api/oauth2/authorize?client_id={{discord_client_id}}&response_type=code&redirect_uri={{server_url}}%2Fdiscord%2Foauth&scope=identify&state=policykit_discord_user_login">
  Sign in with Discord
</a>


</P>





<!-- {% if form.errors and not form.non_field_errors %}
<p class="errornote">
{% if form.errors.items|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}
</p>
{% endif %}

{% if form.non_field_errors %}
{% for error in form.non_field_errors %}
<p class="errornote">
    {{ error }}
</p>
{% endfor %}
{% endif %}

<div id="content-main">

{% if user.is_authenticated %}
<p class="errornote">
{% blocktrans trimmed %}
    You are authenticated as {{ username }}, but are not authorized to
    access this page. Would you like to login to a different account?
{% endblocktrans %}
</p>
{% endif %}

<form action="{{ app_path }}" method="post" id="login-form">{% csrf_token %}
  <div class="form-row">
    {{ form.username.errors }}
    {{ form.username.label_tag }} {{ form.username }}
  </div>
  <div class="form-row">
    {{ form.password.errors }}
    {{ form.password.label_tag }} {{ form.password }}
    <input type="hidden" name="next" value="{{ next }}">
  </div>
  {% url 'admin_password_reset' as password_reset_url %}
  {% if password_reset_url %}
  <div class="password-reset-link">
    <a href="{{ password_reset_url }}">{% trans 'Forgotten your password or username?' %}</a>
  </div>
  {% endif %}
  <div class="submit-row">
    <label>&nbsp;</label><input type="submit" value="{% trans 'Log in' %}">
  </div>
</form>

</div> -->
{% endblock %}
